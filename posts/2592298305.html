<!DOCTYPE html><html lang="zh-CN"><head><style type="text/css">.douban-card-block{display:flex;justify-content:center;align-items:center;width:100%;max-height:400px}.douban-card{display:flex;margin:30px 10px;padding:15px;border-radius:15px;position:relative;justify-content:center;align-items:center;overflow:hidden;color:#faebd7;text-decoration:none}.douban-card:hover{text-decoration:none}.douban-card-bgimg{position:absolute;width:115%;height:115%;filter:blur(15px) brightness(.6);background-size:100%;background-position:center;background-repeat:no-repeat}.douban-card-img{position:relative;height:130px;width:80px;background-size:100%;background-position:center;background-repeat:no-repeat}.douban-card-left:hover .douban-card-img{filter:blur(5px) brightness(.6);transform:perspective(800px) rotateX(180deg)}.douban-card-left .douban-card-img{transition:all .5s ease}.douban-card-left{position:relative;display:flex;flex-direction:column;align-items:center}.douban-card-left .douban-card-status{height:130px;width:80px;text-align:center;font-weight:700;position:absolute;left:0;top:30%;transform:rotateX(180deg);backface-visibility:hidden;transition:all .5s ease}.douban-card-left:hover .douban-card-status{transform:perspective(800px) rotateX(0)}.douban-card-right{position:relative;display:flex;flex-direction:column;margin-left:12px;font-size:16px;font-family:"Courier New",Courier,monospace;line-height:1.3;color:#faebd7}.douban-card-item{margin-top:4px}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=PT+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.shaogui.life","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat","show_result":true},"fold":{"enable":true,"height":200},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><meta name="description" content="本文介绍 langchain 的提示模板"><meta property="og:type" content="article"><meta property="og:title" content="langChain 基础 02 - 提示词"><meta property="og:url" content="https://www.shaogui.life/posts/2592298305.html"><meta property="og:site_name" content="年轻人起来冲"><meta property="og:description" content="本文介绍 langchain 的提示模板"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-09-17T21:57:04.000Z"><meta property="article:modified_time" content="2025-01-18T10:50:08.854Z"><meta property="article:author" content="Shaogui"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.shaogui.life/posts/2592298305.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.shaogui.life/posts/2592298305.html","path":"posts/2592298305.html","title":"langChain 基础 02 - 提示词"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>langChain 基础 02 - 提示词 | 年轻人起来冲</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><link rel="alternate" href="/atom.xml" title="年轻人起来冲" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">年轻人起来冲</p><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">77</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">70</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">544</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8F%90%E7%A4%BA%E6%A8%A1%E6%9D%BF"><span class="nav-number">1.</span> <span class="nav-text">字符串提示模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%8A%E5%A4%A9%E6%8F%90%E7%A4%BA%E8%AF%8D"><span class="nav-number">2.</span> <span class="nav-text">聊天提示词</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Shaogui" src="/images/avatar-2023.png"><p class="site-author-name" itemprop="name">Shaogui</p><div class="site-description" itemprop="description">害怕失败是本能，勇敢面对才是本事</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">544</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">70</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">77</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/WuShaogui" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;WuShaogui" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/mu-zhi-zhi-tian" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;mu-zhi-zhi-tian" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i>知乎</a></span></div><div class="cc-license animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> 链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://manaai.cn/" title="http:&#x2F;&#x2F;manaai.cn&#x2F;" rel="noopener" target="_blank">神力AI</a></li></ul></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.shaogui.life/posts/2592298305.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar-2023.png"><meta itemprop="name" content="Shaogui"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="年轻人起来冲"><meta itemprop="description" content="害怕失败是本能，勇敢面对才是本事"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="langChain 基础 02 - 提示词 | 年轻人起来冲"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">langChain 基础 02 - 提示词</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-09-18 05:57:04" itemprop="dateCreated datePublished" datetime="2024-09-18T05:57:04+08:00">2024-09-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-01-18 18:50:08" itemprop="dateModified" datetime="2025-01-18T18:50:08+08:00">2025-01-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">2-深度学习</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLM%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%8C%87%E5%8D%97/" itemprop="url" rel="index"><span itemprop="name">LLM开发工程师指南</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLM%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%8C%87%E5%8D%97/LangChain/" itemprop="url" rel="index"><span itemprop="name">LangChain</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>7.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>7 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>本文介绍 langchain 的提示模板</p><span id="more"></span><p>提示词指的是输入到 llm 的文本，一个准确的提问会让 llm 的回答更加准确，提示词不仅改变提问内容，还涉及逻辑思维、迭代优化问题，所以有学科（岗位）叫提示词开发工程师</p><p>Langchain 抽象了提示词组件，方便定义、修改提示词</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain <span class="keyword">import</span> prompts</span><br><span class="line">atts=<span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> att:att.lower().find(<span class="string">'prompt'</span>)&gt;=<span class="number">0</span>,<span class="built_in">dir</span>(prompts)))</span><br><span class="line"><span class="built_in">print</span>(atts)</span><br></pre></td></tr></tbody></table></figure><blockquote><p>[‘AIMessagePromptTemplate’, ‘BaseChatPromptTemplate’, ‘BasePromptTemplate’, ‘ChatMessagePromptTemplate’, ‘ChatPromptTemplate’, ‘FewShotChatMessagePromptTemplate’, ‘FewShotPromptTemplate’, ‘FewShotPromptWithTemplates’, ‘HumanMessagePromptTemplate’, ‘PipelinePromptTemplate’, ‘Prompt’, ‘PromptTemplate’, ‘StringPromptTemplate’, ‘SystemMessagePromptTemplate’, ‘load_prompt’, ‘prompt’]</p></blockquote><p>通过查看这个组件的模块，可以看到其中主要有 3 个基类 <code>BasePromptTemplate</code>，<code>BaseChatPromptTemplate</code>、<code>PromptValue</code>，我们分别学习其中代表性的 <code>PromptTemplate</code>、<code>ChatPromptTemplate</code></p><pre><code class="highlight mermaid">classDiagram
    class BasePromptTemplate
    class PipelinePromptTemplate
    class StringPromptTemplate
    class BaseChatPromptTemplate
    class PromptTemplate
    class FewShotPromptTemplate
    class FewShotPromptWithTemplates
    class AutoGPTPrompt
    class ChatPromptTemplate
    class AgentScratchPadChatPromptTemplate
    class BaseMessagePromptTemplate
    class MessagesPlaceholder
    class BaseStringMessagePromptTemplate
    class HumanMessagePromptTemplate
    class AIMessagePromptTemplate
    class SystemMessagePromptTemplate
    PromptValue&lt;|-- StringPromptValue
    PromptValue&lt;|-- ChatPromptValue
    BasePromptTemplate &lt;|-- PipelinePromptTemplate
    BasePromptTemplate &lt;|-- StringPromptTemplate
    BasePromptTemplate &lt;|-- BaseChatPromptTemplate
    StringPromptTemplate &lt;|-- PromptTemplate
    StringPromptTemplate &lt;|-- FewShotPromptTemplate
    StringPromptTemplate &lt;|-- FewShotPromptWithTemplates
    BaseChatPromptTemplate &lt;|-- AutoGPTPrompt
    BaseChatPromptTemplate &lt;|-- ChatPromptTemplate
    ChatPromptTemplate &lt;|-- AgentScratchPadChatPromptTemplate
    BaseMessagePromptTemplate &lt;|-- MessagesPlaceholder
    BaseMessagePromptTemplate &lt;|--                               BaseStringMessagePromptTemplate
    BaseStringMessagePromptTemplate &lt;|-- ChatMessagePromptTemplate
    ChatMessagePromptTemplate &lt;|-- HumanMessagePromptTemplate
    ChatMessagePromptTemplate &lt;|-- AIMessagePromptTemplate
    ChatMessagePromptTemplate &lt;|-- SystemMessagePromptTemplate</code></pre><h2 id="字符串提示模板"><a class="markdownIt-Anchor" href="#字符串提示模板"></a> 字符串提示模板</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line">template=<span class="string">"""你是城市{city}的导游，负责带{place}游客去白云山游玩"""</span></span><br><span class="line">prompt_template = PromptTemplate.from_template(template=template)</span><br><span class="line">prompt=prompt_template.invoke({<span class="string">'city'</span>:<span class="string">"广州"</span>,<span class="string">'place'</span>:<span class="string">"国外"</span>})</span><br><span class="line">prompt</span><br></pre></td></tr></tbody></table></figure><blockquote><p>StringPromptValue (text=‘你是城市广州的导游，负责带国外游客去白云山游玩’)</p></blockquote><p>可以看出，提示模板接受一个字典作为输入，其中每个键表示提示模板中要填充的变量，ChatPromptTemplate 类似 ptyhon 的 string.Format ()，先声明变量位置，然后往里面填值，基于以上内容直接输入 llm，可以得到 llm 答案</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> OllamaLLM</span><br><span class="line"><span class="comment"># 初始化Ollama LLM，注意需要后台开启ollama服务</span></span><br><span class="line">model_name = <span class="string">"qwen2.5:latest"</span></span><br><span class="line">model  = OllamaLLM(model=model_name,base_url=<span class="string">'http://localhost:11434'</span>)</span><br><span class="line">response=model.invoke(prompt)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">非常高兴能为您服务！作为您的导游，我将带领您探索广州市著名的白云山。现在，请允许我先向您介绍一下白云山的基本情况和一些游览小贴士。</span><br><span class="line">   ### 白云山概况</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**地理位置**</span>：位于广州市中心偏北位置，东临珠江，西连广州大学城。</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**自然风光**</span>：作为广州市的“绿肺”，白云山拥有丰富的植被，四季皆有不同的景色。春天赏花、夏天避暑、秋天观叶、冬天雪景（虽较少见）都各有特色。</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**人文景观**</span>：除了自然风光外，山上还分布着许多历史遗迹和文化景点。</span><br><span class="line">   ### 游览路线与行程安排</span><br><span class="line">   我们今天将沿着主要的登山步道进行游览。全程大约需要 3-4 小时左右，具体时间取决于您的体力情况和个人兴趣。</span><br><span class="line"><span class="bullet">   1.</span> <span class="strong">**入口进入**</span></span><br><span class="line"><span class="bullet">      -</span> 从白云山南门进入（建议选择这一入口，因为这里人流相对较少且风景较佳）。</span><br><span class="line"><span class="bullet">   2.</span> <span class="strong">**主干道路线**</span></span><br><span class="line"><span class="bullet">      -</span> 走过主要的登山步道，一路上可以欣赏到不同种类的树木和花卉。</span><br><span class="line"><span class="bullet">   3.</span> <span class="strong">**重要景点参观**</span>：</span><br><span class="line"><span class="bullet">      -</span> 沿途会经过摩星岭、鸣春谷等著名景点。您可以在这些地方稍作停留拍照或休息。</span><br><span class="line"><span class="bullet">   4.</span> <span class="strong">**返回**</span></span><br><span class="line"><span class="bullet">      -</span> 根据您的体力情况和时间安排，可以选择直接下山或者选择乘坐缆车快速返回。</span><br><span class="line">   ### 注意事项</span><br><span class="line"><span class="bullet">   -</span> 请穿着舒适的鞋子并带上足够的水份补给。</span><br><span class="line"><span class="bullet">   -</span> 夏季记得涂抹防晒霜，并随身携带太阳镜等防晒用品。</span><br><span class="line"><span class="bullet">   -</span> 携带一些简单的零食，在休息时享用。</span><br><span class="line"><span class="bullet">   -</span> 尊重自然，不要乱丢垃圾或破坏植被。</span><br><span class="line"><span class="code">     如果您有任何特殊需求或者想要探索特定的地方，请随时告知我。希望这次游览能让您更好地了解广州这座美丽的城市！</span></span><br></pre></td></tr></tbody></table></figure><h2 id="聊天提示词"><a class="markdownIt-Anchor" href="#聊天提示词"></a> 聊天提示词</h2><p>以上只是向 llm 发送一次提问，如果要向 llm 发送 “一段对话”，可以使用 <code>ChatPromptTemplate</code></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="comment"># 首先，构造一个提示模版字符串：`template_string`</span></span><br><span class="line">template_string = <span class="string">"""把由三个反引号分隔的文本\</span></span><br><span class="line"><span class="string">翻译成一种{style}风格。\</span></span><br><span class="line"><span class="string">文本: ```{text}```</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">chat_prompt_template = ChatPromptTemplate.from_template(template_string)</span><br><span class="line">chat_prompt=chat_prompt_template.invoke({<span class="string">'style'</span>:<span class="string">"普通话"</span>,<span class="string">'text'</span>:<span class="string">"Hello, Guangzhou!"</span>})</span><br><span class="line">chat_prompt</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ChatPromptValue (messages=[HumanMessage (content='把由三个反引号分隔的文本翻译成一种普通话风格。文本: <span class="code">```Hello, Guangzhou!```</span>\n', additional<span class="emphasis">_kwargs={}, response_</span>metadata={})])</span><br></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> ChatOllama</span><br><span class="line"><span class="comment"># 初始化Ollama LLM，注意需要后台开启ollama服务</span></span><br><span class="line">model_name = <span class="string">"qwen2.5:latest"</span></span><br><span class="line">chat_model  = ChatOllama(model=model_name,base_url=<span class="string">'http://localhost:11434'</span>)</span><br><span class="line">response=chat_model.invoke(chat_prompt)</span><br><span class="line">response</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AIMessage (content='<span class="code">```你好，广州！```</span>', additional<span class="emphasis">_kwargs={}, response_</span>metadata={'model': 'qwen 2.5: latest', 'created<span class="emphasis">_at': '2024-12-30 T05:54:33.4289242 Z', 'done': True, 'done_</span>reason': 'stop', 'total<span class="emphasis">_duration': 607320800, 'load_</span>duration': 58754400, 'prompt<span class="emphasis">_eval_</span>count': 55, 'prompt<span class="emphasis">_eval_</span>duration': 109000000, 'eval<span class="emphasis">_count': 7, 'eval_</span>duration': 436000000, 'message': Message (role='assistant', content='', images=None, tool<span class="emphasis">_calls=None)}, id='run-65 f 06 d 12-295 a-4540-81 f 2-b 267750 fc 470-0', usage_</span>metadata={'input<span class="emphasis">_tokens': 55, 'output_</span>tokens': 7, 'total<span class="emphasis">_tokens': 62})</span></span><br></pre></td></tr></tbody></table></figure><p>注意，这里为了区分人类信息、机器信息，langchian 抽象出 Messege 的概念，并以 HumanMessage、AIMessage 区分，当准备向 llm 传递一段对话时，可以进行以下操作</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> AIMessage,HumanMessage</span><br><span class="line">messages=[</span><br><span class="line">    HumanMessage(content=<span class="string">"你叫小广，专门回答关于广州的问题"</span>),</span><br><span class="line">    AIMessage(content=<span class="string">"好的，我叫小广，设计用于回答广州的问题"</span>),</span><br><span class="line">    HumanMessage(content=<span class="string">"你是谁？"</span>)</span><br><span class="line">]</span><br><span class="line">response=chat_model.invoke(messages)</span><br><span class="line">response</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AIMessage (content='我是来自阿里云的 AI 助手小广，专门为您提供关于广州的相关信息和问题解答。有什么关于广州的问题可以随时问我哦！', additional<span class="emphasis">_kwargs={}, response_</span>metadata={'model': 'qwen 2.5: latest', 'created<span class="emphasis">_at': '2024-12-30 T05:38:50.4394312 Z', 'done': True, 'done_</span>reason': 'stop', 'total<span class="emphasis">_duration': 1093494400, 'load_</span>duration': 39523600, 'prompt<span class="emphasis">_eval_</span>count': 64, 'prompt<span class="emphasis">_eval_</span>duration': 112000000, 'eval<span class="emphasis">_count': 30, 'eval_</span>duration': 939000000, 'message': Message (role='assistant', content='', images=None, tool<span class="emphasis">_calls=None)}, id='run-59 bc 1 e 0 b-8 a 99-4351-bd 2 d-ede 51 ba 97337-0', usage_</span>metadata={'input<span class="emphasis">_tokens': 64, 'output_</span>tokens': 30, 'total<span class="emphasis">_tokens': 94})</span></span><br></pre></td></tr></tbody></table></figure><p>实际上，langchian 不仅有 <code>AIMessage</code>, <code>HumanMessage</code>，还有以下 Message</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core <span class="keyword">import</span> messages</span><br><span class="line">atts=<span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> att:att.lower().find(<span class="string">'message'</span>)&gt;=<span class="number">0</span>,<span class="built_in">dir</span>(messages)))</span><br><span class="line"><span class="built_in">print</span>(atts)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">['AIMessage', 'AIMessageChunk', 'AnyMessage', 'BaseMessage', 'BaseMessageChunk', 'ChatMessage', 'ChatMessageChunk', 'FunctionMessage', 'FunctionMessageChunk', 'HumanMessage', 'HumanMessageChunk', 'MessageLikeRepresentation', 'RemoveMessage', 'SystemMessage', 'SystemMessageChunk', 'ToolMessage', 'ToolMessageChunk', '<span class="emphasis">_message_</span>from<span class="emphasis">_dict', 'convert_</span>to<span class="emphasis">_messages', 'convert_</span>to<span class="emphasis">_openai_</span>messages', 'filter<span class="emphasis">_messages', 'merge_</span>message<span class="emphasis">_runs', 'message_</span>chunk<span class="emphasis">_to_</span>message', 'message<span class="emphasis">_to_</span>dict', 'messages<span class="emphasis">_from_</span>dict', 'messages<span class="emphasis">_to_</span>dict', 'trim<span class="emphasis">_messages']</span></span><br></pre></td></tr></tbody></table></figure><p>这段脚本展示了如何使用 LangChain 库中的提示词组件来构建和调用 LLM（大型语言模型），具体包括<strong>字符串提示模板、聊天提示模板以及消息对象</strong>的使用。更复杂的使用包括：使用少样本提示选择器、绑定结构化输出解释器，这将在进阶内容上提出</p></div><footer class="post-footer"><div class="reward-container"><div>请我一杯咖啡吧！</div><button>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.png" alt="Shaogui 微信"> <span>微信</span></div><div><img src="/images/alipay.png" alt="Shaogui 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Shaogui</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://www.shaogui.life/posts/2592298305.html" title="langChain 基础 02 - 提示词">https://www.shaogui.life/posts/2592298305.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><span>欢迎关注我的其它发布渠道</span><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="https://www.zhihu.com/people/mu-zhi-zhi-tian"><span class="icon"><i class="fab fa-zhihu"></i> </span><span class="label">知乎</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i> </span><span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/1505246790.html" rel="prev" title="langChain 基础 01 - 模型"><i class="fa fa-angle-left"></i> langChain 基础 01 - 模型</a></div><div class="post-nav-item"><a href="/posts/2631557091.html" rel="next" title="langChain 基础 03 - 存储">langChain 基础 03 - 存储 <i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments utterances-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Shaogui</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>站点总字数：</span> <span title="站点总字数">1.9m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">28:48</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="reading-progress-bar"></div><a href="https://github.com/WuShaogui" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"WuShaogui/wushaogui.github.io","issue_term":"pathname","theme":"github-light"}</script><script src="/js/third-party/comments/utterances.js"></script></body></html>