<!DOCTYPE html><html lang="zh-CN"><head><style type="text/css">.douban-card-block{display:flex;justify-content:center;align-items:center;width:100%;max-height:400px}.douban-card{display:flex;margin:30px 10px;padding:15px;border-radius:15px;position:relative;justify-content:center;align-items:center;overflow:hidden;color:#faebd7;text-decoration:none}.douban-card:hover{text-decoration:none}.douban-card-bgimg{position:absolute;width:115%;height:115%;filter:blur(15px) brightness(.6);background-size:100%;background-position:center;background-repeat:no-repeat}.douban-card-img{position:relative;height:130px;width:80px;background-size:100%;background-position:center;background-repeat:no-repeat}.douban-card-left:hover .douban-card-img{filter:blur(5px) brightness(.6);transform:perspective(800px) rotateX(180deg)}.douban-card-left .douban-card-img{transition:all .5s ease}.douban-card-left{position:relative;display:flex;flex-direction:column;align-items:center}.douban-card-left .douban-card-status{height:130px;width:80px;text-align:center;font-weight:700;position:absolute;left:0;top:30%;transform:rotateX(180deg);backface-visibility:hidden;transition:all .5s ease}.douban-card-left:hover .douban-card-status{transform:perspective(800px) rotateX(0)}.douban-card-right{position:relative;display:flex;flex-direction:column;margin-left:12px;font-size:16px;font-family:"Courier New",Courier,monospace;line-height:1.3;color:#faebd7}.douban-card-item{margin-top:4px}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=PT+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.shaogui.life","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat","show_result":true},"fold":{"enable":true,"height":200},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><meta name="description" content="本文介绍 agent 调用工具的原理"><meta property="og:type" content="article"><meta property="og:title" content="langchain 进阶 03-Agent"><meta property="og:url" content="https://www.shaogui.life/posts/1274944470.html"><meta property="og:site_name" content="年轻人起来冲"><meta property="og:description" content="本文介绍 agent 调用工具的原理"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://picgo-1304919305.cos.ap-guangzhou.myqcloud.com/picGo/202501142302769.png"><meta property="og:image" content="https://picgo-1304919305.cos.ap-guangzhou.myqcloud.com/picGo/202501142302771.png"><meta property="article:published_time" content="2024-10-02T11:34:17.000Z"><meta property="article:modified_time" content="2025-01-18T10:50:08.861Z"><meta property="article:author" content="Shaogui"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://picgo-1304919305.cos.ap-guangzhou.myqcloud.com/picGo/202501142302769.png"><link rel="canonical" href="https://www.shaogui.life/posts/1274944470.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.shaogui.life/posts/1274944470.html","path":"posts/1274944470.html","title":"langchain 进阶 03-Agent"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>langchain 进阶 03-Agent | 年轻人起来冲</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><link rel="alternate" href="/atom.xml" title="年轻人起来冲" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">年轻人起来冲</p><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">77</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">70</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">544</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Shaogui" src="/images/avatar-2023.png"><p class="site-author-name" itemprop="name">Shaogui</p><div class="site-description" itemprop="description">害怕失败是本能，勇敢面对才是本事</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">544</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">70</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">77</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/WuShaogui" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;WuShaogui" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/mu-zhi-zhi-tian" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;mu-zhi-zhi-tian" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i>知乎</a></span></div><div class="cc-license animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> 链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://manaai.cn/" title="http:&#x2F;&#x2F;manaai.cn&#x2F;" rel="noopener" target="_blank">神力AI</a></li></ul></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.shaogui.life/posts/1274944470.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar-2023.png"><meta itemprop="name" content="Shaogui"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="年轻人起来冲"><meta itemprop="description" content="害怕失败是本能，勇敢面对才是本事"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="langchain 进阶 03-Agent | 年轻人起来冲"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">langchain 进阶 03-Agent</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-10-02 19:34:17" itemprop="dateCreated datePublished" datetime="2024-10-02T19:34:17+08:00">2024-10-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-01-18 18:50:08" itemprop="dateModified" datetime="2025-01-18T18:50:08+08:00">2025-01-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">2-深度学习</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLM%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%8C%87%E5%8D%97/" itemprop="url" rel="index"><span itemprop="name">LLM开发工程师指南</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLM%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%8C%87%E5%8D%97/LangChain/" itemprop="url" rel="index"><span itemprop="name">LangChain</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>20k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>18 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>本文介绍 agent 调用工具的原理</p><span id="more"></span><p>总的来说，LLM 能较准确地回答问题，但是还是存在以下问题：</p><ul><li>幻觉：一本正经回答问题，结果却是不正确的，尤其对逻辑推理、计算和检索外部信息的能力较弱</li><li>及时性：基于已训练语料回答问题，不涉及的信息无法回答</li></ul><p>通过 FuntionCalling 给 LLM 上外挂，一定程度解决了这个问题，但是对于复杂的、需要多次 FuntionCalling 的问题，应该如何解决呢？本文介绍另一个技术：<strong>Agent (智能体)</strong></p><p><img data-src="https://picgo-1304919305.cos.ap-guangzhou.myqcloud.com/picGo/202501142302769.png" alt="langchain代理-20241201215627"></p><p>Agent 由以下部分组成：</p><table><thead><tr><th>组成部分</th><th>定义</th><th>实现方式</th></tr></thead><tbody><tr><td>规划（Planning）</td><td>Agent 的思维模型，负责拆解复杂任务为可执行的子任务，并评估执行策略的思维模型。</td><td>通过大模型提示工程（如 ReAct、CoT 推理模式）实现，使 Agent 能够精准拆解任务，分步解决。</td></tr><tr><td>记忆（Memory）</td><td>信息存储与回忆，包括短期记忆和长期记忆。</td><td>短期记忆用于存储会话上下文，支持多轮对话；长期记忆则存储用户特征、业务数据等，通常通过向量数据库等技术实现快速存取。</td></tr><tr><td>工具（Tools）</td><td>Agent 感知环境、执行决策的辅助手段，如 API 调用、插件扩展等。</td><td>通过接入外部工具（如 API、插件）扩展 Agent 的能力，如 ChatPDF 解析文档、Midjourney 文生图等。</td></tr><tr><td>行动（Action）</td><td>将规划与记忆转化为具体输出的过程，包括与外部环境的互动或工具调用。</td><td>Agent 根据规划与记忆执行具体行动，如智能客服回复、查询天气预报、AI 机器人抓起物体等。</td></tr><tr><td>一个更加形象的例子是：原始人有了记忆之后，掌握了工具的使用，当在野外遇见一头鹿时，选择了弓箭和火来完成捕猎</td><td></td><td></td></tr></tbody></table><p><img data-src="https://picgo-1304919305.cos.ap-guangzhou.myqcloud.com/picGo/202501142302771.png" alt="langchain代理-20241201171342"></p><p>看起来 Agnet 也是调用函数，那么 <strong>FuntionCalling 与 Agent 的区别？</strong></p><ul><li>Llm 在 FuntionCalling 只是找出合适工具，并没有真正调用工具，手动调用工具后，还要输入 llm 进行最后的总结</li><li>Agent 通过 Planning 规划任务后，找到调用工具，会自动执行，并且可以模拟思考过程执行多次，直至问题解决</li></ul><p>以下是智能体使用例子：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> load_tools, initialize_agent</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> AgentType</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> load_tools</span><br><span class="line"><span class="keyword">from</span> langchain_community.tools.tavily_search <span class="keyword">import</span> TavilySearchResults</span><br><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> ChatOllama</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化Ollama LLM，注意需要后台开启ollama服务</span></span><br><span class="line">model_name = <span class="string">"qwen2.5:latest"</span></span><br><span class="line">model  = ChatOllama(model=model_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义工具</span></span><br><span class="line">search = TavilySearchResults(max_results=<span class="number">2</span>)</span><br><span class="line">tools = load_tools(</span><br><span class="line">    [<span class="string">"llm-math"</span>], </span><br><span class="line">    llm=model <span class="comment">#第一步初始化的模型</span></span><br><span class="line">)</span><br><span class="line">tools.append(search)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化代理</span></span><br><span class="line">agent= initialize_agent(</span><br><span class="line">    tools, <span class="comment">#第二步加载的工具</span></span><br><span class="line">    model, <span class="comment">#第一步初始化的模型</span></span><br><span class="line">    agent=AgentType.CHAT_ZERO_SHOT_REACT_DESCRIPTION,  <span class="comment">#代理类型</span></span><br><span class="line">    handle_parsing_errors=<span class="literal">True</span>, <span class="comment">#处理解析错误</span></span><br><span class="line">    verbose = <span class="literal">True</span> <span class="comment">#输出中间步骤</span></span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agent(<span class="string">"计算300的25%"</span>) </span><br></pre></td></tr></tbody></table></figure><blockquote><p>&gt; Entering new AgentExecutor chain…<br>Thought: 这个问题要求我们找出 300 的 25%，我们需要用到计算器来完成这个数学运算。<br>Action:<br>{<br>“action”: “Calculator”,<br>“action_input”: “300 * 0.25”<br>}<br>Observation: Answer:<br>Thought:;[1;3mFinal Answer: 300 的 25% 是 75。<br>Finished chain.<br>{‘input’: ‘计算 300 的 25%’, ‘output’: ‘300 的 25% 是 75。’}</p></blockquote><p><strong>上面的过程可以总结为下</strong></p><ol><li>模型对于接下来需要做什么，给出思考<br><strong>思考</strong>：我可以使用计算工具来计算 300 的 25%</li><li>模型基于思考采取行动<br><strong>行动</strong>: 使用计算器（calculator），输入（action_input）300*0.25</li><li>模型得到观察<br><strong>观察</strong>：答案: 75.0</li><li>基于观察，模型对于接下来需要做什么，给出思考<br><strong>思考</strong>: 计算工具返回了 300 的 25%，答案为 75</li><li>给出最终答案（Final Answer）<br><strong>最终答案</strong>: 300 的 25% 等于 75。</li><li>以字典的形式给出最终答案。</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agent(<span class="string">"什么是智能体agent"</span>) </span><br></pre></td></tr></tbody></table></figure><blockquote><p>&gt; Entering new AgentExecutor chain…<br>Question: 什么是智能体 agent<br>Thought: 这是一个关于智能体 agent 的概念性问题，可能需要提供一个定义或者解释。<br>Action:<br>{<br>“action”: “tavily_search_results_json”,<br>“action_input”: “什么是智能体 agent”<br>}<br>Observation: {‘url’: ‘<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%99%BA%E8%83%BD%E4%BD%93/9446647">https://baike.baidu.com/item/ 智能体 / 9446647</a>’, ‘content’: ‘智能体（Agent）是指能够感知环境并采取行动以实现特定目标的代理体。它可以是软件、硬件或一个系统，具备自主性、适应性和交互能力。智能体通过感知环境中的变化（如通过传感器或数据输入），根据自身学习到的知识和算法进行判断和决策，进而执行动作以影响环境或达到预定的目标。’}, {‘url’: ‘<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2422923">https://cloud.tencent.com/developer/article/2422923</a>’, ‘content’: ‘智能体是什么。智能体的英文是 Agent，AI 业界对智能体提出了各种定义。个人理解，智能体是一种通用问题解决器。从软件工程的角度看来，智能体是一种基于大语言模型的，具备规划思考能力、记忆能力、使用工具函数的能力，能自主完成给定任务的计算机程序。’}<br>Thought:Action:<br>{<br>“action”: “tavily_search_results_json”,<br>“action_input”: “什么是智能体 agent”<br>}<br>Observation: {‘url’: ‘<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%99%BA%E8%83%BD%E4%BD%93/9446647">https://baike.baidu.com/item/ 智能体 / 9446647</a>’, ‘content’: ‘智能体（Agent）是指能够感知环境并采取行动以实现特定目标的代理体。它可以是软件、硬件或一个系统，具备自主性、适应性和交互能力。智能体通过感知环境中的变化（如通过传感器或数据输入），根据自身学习到的知识和算法进行判断和决策，进而执行动作以影响环境或达到预定的目标。’}, {‘url’: ‘<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2422923">https://cloud.tencent.com/developer/article/2422923</a>’, ‘content’: ‘智能体是什么。智能体的英文是 Agent，AI 业界对智能体提出了各种定义。个人理解，智能体是一种通用问题解决器。从软件工程的角度看来，智能体是一种基于大语言模型的，具备规划思考能力、记忆能力、使用工具函数的能力，能自主完成给定任务的计算机程序。’}<br>Thought:Action:<br>{<br>“action”: “tavily_search_results_json”,<br>“action_input”: “什么是智能体 agent”<br>}<br>Observation: [33;[1;3m[{‘url’: ‘<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%99%BA%E8%83%BD%E4%BD%93/9446647">https://baike.baidu.com/item/ 智能体 / 9446647</a>’, ‘content’: ‘智能体（Agent）是指能够感知环境并采取行动以实现特定目标的代理体。它可以是软件、硬件或一个系统，具备自主性、适应性和交互能力。智能体通过感知环境中的变化（如通过传感器或数据输入），根据自身学习到的知识和算法进行判断和决策，进而执行动作以影响环境或达到预定的目标。’}, {‘url’: ‘<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2422923">https://cloud.tencent.com/developer/article/2422923</a>’, ‘content’: ‘智能体是什么。智能体的英文是 Agent，AI 业界对智能体提出了各种定义。个人理解，智能体是一种通用问题解决器。从软件工程的角度看来，智能体是一种基于大语言模型的，具备规划思考能力、记忆能力、使用工具函数的能力，能自主完成给定任务的计算机程序。’}<br>Thought: 我找到了两个解释：<br>1. 智能体（Agent）是指能够感知环境并采取行动以实现特定目标的代理体。它可以是软件、硬件或一个系统，具备自主性、适应性和交互能力。<br>2. 个人理解，智能体是一种通用问题解决器。从软件工程的角度看来，智能体是一种基于大语言模型的，具备规划思考能力、记忆能力、使用工具函数的能力，能自主完成给定任务的计算机程序。<br>根据这些解释，我们可以总结出：智能体 agent 是指一种能够感知环境并采取行动以实现特定目标的代理体。它可以是软件、硬件或一个系统，并且具备自主性、适应性和交互能力。<br>Thought: 我现在知道了智能体 agent 的具体定义和特点。<br>Final Answer: 智能体（Agent）是一种能够感知环境并采取行动以实现特定目标的代理体，可以是软件、硬件或一个系统，具备自主性、适应性和交互能力。<br>Finished chain<br>{‘input’: ‘什么是智能体 agent’,<br>‘output’: ‘智能体（Agent）是一种能够感知环境并采取行动以实现特定目标的代理体，可以是软件、硬件或一个系统，具备自主性、适应性和交互能力。’}</p></blockquote><p>这里使用了网络工具对提问进行查询，然后再进行回答，可以发现，Agent 多次调用工具去寻找答案</p><p>以上例子直接调用 API 生成 agnet，没有将 “记忆” 过程展示出来，下面进行分析</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import relevant functionality</span></span><br><span class="line"><span class="keyword">from</span> langchain.utilities <span class="keyword">import</span> OpenWeatherMapAPIWrapper</span><br><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> HumanMessage</span><br><span class="line"><span class="keyword">from</span> langgraph.checkpoint.memory <span class="keyword">import</span> MemorySaver</span><br><span class="line"><span class="keyword">from</span> langgraph.prebuilt <span class="keyword">import</span> create_react_agent</span><br><span class="line"><span class="keyword">from</span> langchain_community.tools.tavily_search <span class="keyword">import</span> TavilySearchResults</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> api_key <span class="keyword">import</span> GAODE_WEATHER_API_KEY</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> tool</span><br><span class="line"></span><br><span class="line"><span class="meta">@tool</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_weather</span>(<span class="params">city_name:<span class="built_in">str</span></span>)-&gt;<span class="built_in">dict</span>:</span><br><span class="line">    <span class="string">'''根据输入的城市名，使用高德接口查询当地天气'''</span></span><br><span class="line">    <span class="comment"># 构建请求URL</span></span><br><span class="line">    url = <span class="string">f'https://restapi.amap.com/v3/weather/weatherInfo?key=<span class="subst">{GAODE_WEATHER_API_KEY}</span>&amp;city=<span class="subst">{city_name}</span>&amp;extensions=all'</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 发送GET请求</span></span><br><span class="line">        response = requests.get(url)</span><br><span class="line">        <span class="comment"># 检查请求是否成功</span></span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="comment"># 解析响应内容</span></span><br><span class="line">            data = response.json()</span><br><span class="line">            <span class="comment"># 检查API响应状态</span></span><br><span class="line">            <span class="keyword">if</span> data.get(<span class="string">'status'</span>) == <span class="string">'1'</span> <span class="keyword">and</span> data.get(<span class="string">'infocode'</span>) == <span class="string">'10000'</span>:</span><br><span class="line">                <span class="keyword">return</span> data  <span class="comment"># 返回天气数据</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> {}  <span class="comment"># 返回空结果，因为API返回了错误信息</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> {}  <span class="comment"># 返回空结果，因为HTTP状态码不是200</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f"An error occurred: <span class="subst">{e}</span>"</span>)</span><br><span class="line">        <span class="keyword">return</span> {}  <span class="comment"># 返回空结果，因为请求过程中发生了异常</span></span><br><span class="line"></span><br><span class="line">search = TavilySearchResults(max_results=<span class="number">2</span>)</span><br><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> ChatOllama</span><br><span class="line"><span class="comment"># 初始化Ollama LLM，注意需要后台开启ollama服务</span></span><br><span class="line">model_name = <span class="string">"qwen2.5:latest"</span></span><br><span class="line">model  = ChatOllama(model=model_name,base_url=<span class="string">'http://192.168.3.155:11434'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the agent</span></span><br><span class="line">memory = MemorySaver()</span><br><span class="line">tools2 = [search,get_weather]</span><br><span class="line">agent_executor = create_react_agent(model, tools2, checkpointer=memory)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use the agent</span></span><br><span class="line">config = {<span class="string">"configurable"</span>: {<span class="string">"thread_id"</span>: <span class="string">"abc123"</span>}}</span><br><span class="line"><span class="keyword">for</span> chunk <span class="keyword">in</span> agent_executor.stream(</span><br><span class="line">    {<span class="string">"messages"</span>: [HumanMessage(content=<span class="string">"你好，我是王五，我住在广州"</span>)]}, config</span><br><span class="line">):</span><br><span class="line">    <span class="built_in">print</span>(chunk)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"----"</span>)</span><br></pre></td></tr></tbody></table></figure><blockquote><p>{‘agent’: {‘messages’: [AIMessage (content=‘你好，王五！你在广州生活一定很愉快。想查询一下广州当前的天气情况吗？如果不想查天气的话，我们也可以聊其他话题。’, additional_kwargs={}, response_metadata={‘model’: ‘qwen2.5:latest’, ‘created_at’: ‘2024-12-02T00:52:57.316147059Z’, ‘done’: True, ‘done_reason’: ‘stop’, ‘total_duration’: 594793341, ‘load_duration’: 30257995, ‘prompt_eval_count’: 251, ‘prompt_eval_duration’: 77092000, ‘eval_count’: 35, ‘eval_duration’: 337965000, ‘message’: Message (role=‘assistant’, content=‘你好，王五！你在广州生活一定很愉快。想查询一下广州当前的天气情况吗？如果不想查天气的话，我们也可以聊其他话题。’, images=None, tool_calls=None)}, id=‘run-a5ba18b5-f766-42d5-8491-2309ce957961-0’, usage_metadata={‘input_tokens’: 251, ‘output_tokens’: 35, ‘total_tokens’: 286})]}}</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> chunk <span class="keyword">in</span> agent_executor.stream(</span><br><span class="line">    {<span class="string">"messages"</span>: [HumanMessage(content=<span class="string">"明天我准备去北京旅游，适合去哪里游玩"</span>)]}, config</span><br><span class="line">):</span><br><span class="line">    <span class="built_in">print</span>(chunk)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"----"</span>)</span><br></pre></td></tr></tbody></table></figure><blockquote><p>{‘agent’: {‘messages’: [AIMessage (content=‘’, additional_kwargs={}, response_metadata={‘model’: ‘qwen2.5:latest’, ‘created_at’: ‘2024-12-02T00:53:03.732086229Z’, ‘done’: True, ‘done_reason’: ‘stop’, ‘total_duration’: 664620284, ‘load_duration’: 31383244, ‘prompt_eval_count’: 305, ‘prompt_eval_duration’: 45418000, ‘eval_count’: 30, ‘eval_duration’: 289704000, ‘message’: Message (role=‘assistant’, content=‘’, images=None, tool_calls=[ToolCall (function=Function (name=‘tavily_search_results_json’, arguments={‘query’: ‘北京 明天 旅游景点’}))])}, id=‘run-51b7c922-359e-4b3e-b074-8a0a7ed5e32d-0’, tool_calls=[{‘name’: ‘tavily_search_results_json’, ‘args’: {‘query’: ‘北京 明天 旅游景点’}, ‘id’: ‘1fe8d1de-d78c-471d-ad00-832e7495f50e’, ‘type’: ‘tool_call’}], usage_metadata={‘input_tokens’: 305, ‘output_tokens’: 30, ‘total_tokens’: 335})]}}<br>{‘tools’: {‘messages’: [ToolMessage(content=‘[{“url”: “<a target="_blank" rel="noopener" href="https://you.ctrip.com/sight/beijing1.html">https://you.ctrip.com/sight/beijing1.html</a>”, “content”: “北京旅游景点大全，携程攻略社区！告诉您北京有哪些热门旅游景点及旅游必去景点，提供北京旅游景点介绍、图片、门票、点评、景点排名推荐，了解更多著名北京旅游景点排行及景点大全信息就来携程旅游攻略。 … 可订明日。赏秋景。中关村”}, {“url”: “<a target="_blank" rel="noopener" href="https://www.visitbeijing.com.cn/article/4IrWXdsMOCO">https://www.visitbeijing.com.cn/article/4IrWXdsMOCO</a>”, “content”: “北京旅游必去的 20 个景点 首页 文化北京 展览 演出 影视 特色文化 红色文化 京味文化 创新文化 畅游北京 游玩 住宿 旅游地图 周末去哪玩 民宿大全 旅游手册 景区 线路 酒店 北京老字号 北京礼物 开放日 旅游行业信用信息 旅行社 一日游 北京旅游专家 《旅游》杂志 环游号 咨询站 北京旅游必去的 20 个景点 北京旅游网综合 一天安门广场 二故宫 故宫，又称紫禁城，是明清两代的皇家宫殿，也是世界上现存规模最大、保存最为完整的木质结构古建筑之一。故宫的建筑风格宏伟壮丽，黄琉璃瓦顶、青白石底座，饰以金碧辉煌的彩画，体现了中国古代建筑的精华。游客在游览故宫时，不仅可以欣赏到古代皇家建筑的辉煌，还能领略到古代宫廷文化的深厚底蕴。 八达岭长城是明长城的重要组成部分，位于北京市延庆区军都山关沟古道北口。八达岭长城以其雄伟壮观、气势磅礴而著称，是长城中最具代表性的一段。游客在此可以登上长城，俯瞰群山峻岭，感受古代劳动人民的智慧与勇气。 四颐和园 五天坛公园 天坛公园是明清两代皇帝祭天、祈谷的地方，也是中国传统文化的象征之一。公园内的祈年殿、圜丘坛等建筑气势恢宏、古朴典雅，体现了中国古代建筑的独特魅力。游客在此可以了解到古代皇家祭祀文化的内涵，还可以感受到中国传统文化的博大精深。 六圆明园遗址公园 圆明园曾是清朝皇家的夏季别墅，被誉为 “万园之园”。然而，在第二次鸦片战争期间，圆明园遭到英法联军的烧毁，如今只存有残垣断壁。游客在游览圆明园遗址公园时，可以感受到历史的沧桑与沉重，也可以了解到中国近代史的一段屈辱历史。 七恭王府 恭王府是清朝恭亲王奕䜣的府邸，也是北京现存最完整的清代王府建筑群之一。恭王府的建筑风格独特，既有宫廷建筑的严谨有序，又有江南园林的精巧别致。游客在此可以欣赏到古代王府建筑的精美之处，还可以了解到清朝皇室的生活和文化。 八北海公园 北海公园是北京最古老的皇家园林之一，也是中国现存最悠久的皇家园林之一。公园内的琼华岛、白塔等景点风景秀丽、古色古香，是游客休闲游玩的好去处。此外，北海公园还是北京市民休闲娱乐的重要场所之一，每天都吸引着大量游客前来参观游览。 九鸟巢与水立方 鸟巢与水立方是 2008 年北京奥运会的主体育场和游泳馆，也是北京的新地标之一。鸟巢以其独特的钢结构设计和造型而著称，水立方则以其蓝色的外观和独特的建筑形态吸引了无数游客的目光。游客在此可以了解到北京奥运会的历史和文化内涵，还可以感受到现代建筑艺术的魅力。 十 798 艺术区 798 艺术区是北京的艺术圣地之一，以其独特的工业建筑风格和多样化的艺术展览而闻名于世。在这里，游客可以欣赏到各种形式的当代艺术作品，与艺术家亲密接触，感受到前卫艺术的魅力。此外，798 艺术区还是北京时尚文化的代表之一，吸引了大量年轻人前来打卡拍照 十一北京动物园 北京动物园是中国最大的动物园之一，拥有众多珍稀动物和植物品种。游客在此可以近距离观赏到大熊猫、金丝猴等珍稀动物的风采，还可以了解到动物的生活习性和保护知识。 十二雍和宫 雍和宫是清朝雍正皇帝的府邸和后来的喇嘛庙，也是北京最大的藏传佛教寺庙之一。游客在此可以领略到藏传佛教文化的独特魅力，还可以欣赏到精美的佛教艺术品。 十三南锣鼓巷 南锣鼓巷是北京最具特色的历史文化街区之一，以其独特的四合院建筑和丰富的商业文化而闻名于世。游客在此可以感受到老北京的风情和生活气息，还可以品尝到各种地道的北京小吃。 十四王府井大街 十六香山公园 十七景山公园 北京科技馆是一个集科普教育、科技交流和休闲娱乐为一体的综合性科技馆。馆内设有众多科技展览和互动体验项目，旨在提高公众的科学素养和科技兴趣。游客在此可以了解到最新的科技发展和应用成果，还可以亲身参与到各种科技体验活动中来。 十九中国国家博物馆 中国国家博物馆是中国最大的综合性博物馆之一，收藏了丰富的历史文物和艺术品。馆内设有多个展厅和专题展览区，展示了中国悠久的历史文化和艺术瑰宝。游客在此可以了解到中国古代文明的辉煌成就和现代社会的发展变迁。 二十北京欢乐谷 总之，北京作为一座历史悠久、文化丰富的城市，拥有众多值得一游的景点。无论您是喜欢历史文化、自然风光还是现代娱乐的游客，都能在北京找到适合自己的旅游目的地。 原创声明：本文是北京旅游网原创文章，其最终版权仍归北京旅游网所有，转载请注明来自北京旅游网 征文启事 为能让网友分享自己美好旅途，记录旅途美好回忆，北京旅游网特面向全球网友公开征集文旅类稿件。范围涵括吃喝玩乐游购娱展演等属于文旅范畴的内容均可，形式图文、视频均可。 稿件必须原创。稿件一经采用，即有机会获得景区门票、精美礼品，更有机会参与北京旅游网年终盛典活动。 投稿邮箱：tougao@visitbeijing.com.cn 咨询 QQ：490768046 79 年前的今天，我们胜利了阅读 草坪 + 夕阳 + 音乐会，有的还免费 | 镜头里的北京・一周精选 新开业！北京又添 “神仙级” 休闲打卡地 又成取景地！还拥有北京 “最北”，秋游约起 —— 这里的 “丛林滑道” 太好玩啦 | 周末去哪 够潮够 city！这些活动热度爆表 —— 上新！高颜值！去这些地方解锁初秋京城 “松弛感”，有的还免费 —— 分享到微信朋友圈 使用 “扫一扫” 即可将网页分享至朋友圈。 短信获取验证码 获取验证码 登录 用户无需注册即可快捷登录，登录后可申请成为作家 2 开学第一课 看了吗？ 3 坐上《往往》的时光机，让我也看看你的少年时光 4“如雁来栖・京秋阅书集” 即将来袭，这个中秋来雁栖一起逛书市！ 579 年前的今天，我们胜利了 69 月 4 日天安门广场升旗仪式观看指南 7 舌尖上的天津：八大特色小吃，让人垂涎欲滴 8 北京 8 大名菜大揭秘！你尝试过几种？网友：京帮菜真的太好吃啦 9 收藏！北京六大特色美食，每一口都充满了经典的味道 10 盘点天津六道好吃的特色名菜，口水直流，你被种草了吗？ 专题推荐 文化北京 关于北京旅游网 / 商务合作 / 网站声明 / 隐私政策 / 联系我们 版权所有：北京市文化和旅游局宣传中心（北京市旅游运行监测中心）”}]’, name=‘tavily_search_results_json’, id=‘9429dbe7-bef9-4820-a1f9-9410aee5dba0’, tool_call_id=‘1fe8d1de-d78c-471d-ad00-832e7495f50e’, artifact={‘query’: ‘北京 明天 旅游景点’, ‘follow_up_questions’: None, ‘answer’: None, ‘images’: [], ‘results’: [{‘title’: ‘北京旅游景点攻略_北京打卡 / 必去景点大全 / 排名 / 推荐【携程攻略】’, ‘url’: ‘<a target="_blank" rel="noopener" href="https://you.ctrip.com/sight/beijing1.html">https://you.ctrip.com/sight/beijing1.html</a>’, ‘content’: ‘北京旅游景点大全，携程攻略社区！告诉您北京有哪些热门旅游景点及旅游必去景点，提供北京旅游景点介绍、图片、门票、点评、景点排名推荐，了解更多著名北京旅游景点排行及景点大全信息就来携程旅游攻略。 … 可订明日。赏秋景。中关村’, ‘score’: 0.99958915, ‘raw_content’: None}, {‘title’: ‘北京旅游必去的 20 个景点’, ‘url’: ‘<a target="_blank" rel="noopener" href="https://www.visitbeijing.com.cn/article/4IrWXdsMOCO">https://www.visitbeijing.com.cn/article/4IrWXdsMOCO</a>’, ‘content’: ‘北京旅游必去的 20 个景点 首页 文化北京 展览 演出 影视 特色文化 红色文化 京味文化 创新文化 畅游北京 游玩 住宿 旅游地图 周末去哪玩 民宿大全 旅游手册 景区 线路 酒店 北京老字号 北京礼物 开放日 旅游行业信用信息 旅行社 一日游 北京旅游专家 《旅游》杂志 环游号 咨询站 北京旅游必去的 20 个景点 北京旅游网综合 一天安门广场 二故宫 故宫，又称紫禁城，是明清两代的皇家宫殿，也是世界上现存规模最大、保存最为完整的木质结构古建筑之一。故宫的建筑风格宏伟壮丽，黄琉璃瓦顶、青白石底座，饰以金碧辉煌的彩画，体现了中国古代建筑的精华。游客在游览故宫时，不仅可以欣赏到古代皇家建筑的辉煌，还能领略到古代宫廷文化的深厚底蕴。 八达岭长城是明长城的重要组成部分，位于北京市延庆区军都山关沟古道北口。八达岭长城以其雄伟壮观、气势磅礴而著称，是长城中最具代表性的一段。游客在此可以登上长城，俯瞰群山峻岭，感受古代劳动人民的智慧与勇气。 四颐和园 五天坛公园 天坛公园是明清两代皇帝祭天、祈谷的地方，也是中国传统文化的象征之一。公园内的祈年殿、圜丘坛等建筑气势恢宏、古朴典雅，体现了中国古代建筑的独特魅力。游客在此可以了解到古代皇家祭祀文化的内涵，还可以感受到中国传统文化的博大精深。 六圆明园遗址公园 圆明园曾是清朝皇家的夏季别墅，被誉为 “万园之园”。然而，在第二次鸦片战争期间，圆明园遭到英法联军的烧毁，如今只存有残垣断壁。游客在游览圆明园遗址公园时，可以感受到历史的沧桑与沉重，也可以了解到中国近代史的一段屈辱历史。 七恭王府 恭王府是清朝恭亲王奕䜣的府邸，也是北京现存最完整的清代王府建筑群之一。恭王府的建筑风格独特，既有宫廷建筑的严谨有序，又有江南园林的精巧别致。游客在此可以欣赏到古代王府建筑的精美之处，还可以了解到清朝皇室的生活和文化。 八北海公园 北海公园是北京最古老的皇家园林之一，也是中国现存最悠久的皇家园林之一。公园内的琼华岛、白塔等景点风景秀丽、古色古香，是游客休闲游玩的好去处。此外，北海公园还是北京市民休闲娱乐的重要场所之一，每天都吸引着大量游客前来参观游览。 九鸟巢与水立方 鸟巢与水立方是 2008 年北京奥运会的主体育场和游泳馆，也是北京的新地标之一。鸟巢以其独特的钢结构设计和造型而著称，水立方则以其蓝色的外观和独特的建筑形态吸引了无数游客的目光。游客在此可以了解到北京奥运会的历史和文化内涵，还可以感受到现代建筑艺术的魅力。 十 798 艺术区 798 艺术区是北京的艺术圣地之一，以其独特的工业建筑风格和多样化的艺术展览而闻名于世。在这里，游客可以欣赏到各种形式的当代艺术作品，与艺术家亲密接触，感受到前卫艺术的魅力。此外，798 艺术区还是北京时尚文化的代表之一，吸引了大量年轻人前来打卡拍照 十一北京动物园 北京动物园是中国最大的动物园之一，拥有众多珍稀动物和植物品种。游客在此可以近距离观赏到大熊猫、金丝猴等珍稀动物的风采，还可以了解到动物的生活习性和保护知识。 十二雍和宫 雍和宫是清朝雍正皇帝的府邸和后来的喇嘛庙，也是北京最大的藏传佛教寺庙之一。游客在此可以领略到藏传佛教文化的独特魅力，还可以欣赏到精美的佛教艺术品。 十三南锣鼓巷 南锣鼓巷是北京最具特色的历史文化街区之一，以其独特的四合院建筑和丰富的商业文化而闻名于世。游客在此可以感受到老北京的风情和生活气息，还可以品尝到各种地道的北京小吃。 十四王府井大街 十六香山公园 十七景山公园 北京科技馆是一个集科普教育、科技交流和休闲娱乐为一体的综合性科技馆。馆内设有众多科技展览和互动体验项目，旨在提高公众的科学素养和科技兴趣。游客在此可以了解到最新的科技发展和应用成果，还可以亲身参与到各种科技体验活动中来。 十九中国国家博物馆 中国国家博物馆是中国最大的综合性博物馆之一，收藏了丰富的历史文物和艺术品。馆内设有多个展厅和专题展览区，展示了中国悠久的历史文化和艺术瑰宝。游客在此可以了解到中国古代文明的辉煌成就和现代社会的发展变迁。 二十北京欢乐谷 总之，北京作为一座历史悠久、文化丰富的城市，拥有众多值得一游的景点。无论您是喜欢历史文化、自然风光还是现代娱乐的游客，都能在北京找到适合自己的旅游目的地。 原创声明：本文是北京旅游网原创文章，其最终版权仍归北京旅游网所有，转载请注明来自北京旅游网 征文启事 为能让网友分享自己美好旅途，记录旅途美好回忆，北京旅游网特面向全球网友公开征集文旅类稿件。范围涵括吃喝玩乐游购娱展演等属于文旅范畴的内容均可，形式图文、视频均可。 稿件必须原创。稿件一经采用，即有机会获得景区门票、精美礼品，更有机会参与北京旅游网年终盛典活动。 投稿邮箱：tougao@visitbeijing.com.cn 咨询 QQ：490768046 79 年前的今天，我们胜利了阅读 草坪 + 夕阳 + 音乐会，有的还免费 | 镜头里的北京・一周精选 新开业！北京又添 “神仙级” 休闲打卡地 又成取景地！还拥有北京 “最北”，秋游约起 —— 这里的 “丛林滑道” 太好玩啦 | 周末去哪 够潮够 city！这些活动热度爆表 —— 上新！高颜值！去这些地方解锁初秋京城 “松弛感”，有的还免费 —— 分享到微信朋友圈 使用 “扫一扫” 即可将网页分享至朋友圈。 短信获取验证码 获取验证码 登录 用户无需注册即可快捷登录，登录后可申请成为作家 2 开学第一课 看了吗？ 3 坐上《往往》的时光机，让我也看看你的少年时光 4“如雁来栖・京秋阅书集” 即将来袭，这个中秋来雁栖一起逛书市！ 579 年前的今天，我们胜利了 69 月 4 日天安门广场升旗仪式观看指南 7 舌尖上的天津：八大特色小吃，让人垂涎欲滴 8 北京 8 大名菜大揭秘！你尝试过几种？网友：京帮菜真的太好吃啦 9 收藏！北京六大特色美食，每一口都充满了经典的味道 10 盘点天津六道好吃的特色名菜，口水直流，你被种草了吗？ 专题推荐 文化北京 关于北京旅游网 / 商务合作 / 网站声明 / 隐私政策 / 联系我们 版权所有：北京市文化和旅游局宣传中心（北京市旅游运行监测中心）’, ‘score’: 0.9980276, ‘raw_content’: None}], ‘response_time’: 1.31})]}}<br>{‘agent’: {‘messages’: [AIMessage (content=‘根据搜索结果，明天去北京旅游的话，可以考虑参观以下景点：\n\n1. <strong>鸟巢与水立方</strong> - 这两个地标是 2008 年奥运会的主体育场和游泳馆。鸟巢以其独特的钢结构设计著称，而水立方则以蓝色外观吸引游客。\n\n2. <strong>798 艺术区</strong> - 是北京的艺术圣地之一，这里的工业建筑风格和多样化的艺术展览值得一游。\n\n3. <strong>南锣鼓巷</strong> - 体验老北京风情和特色四合院。这里还有丰富的商业文化和地道的北京小吃。\n\n4. <strong>北京动物园</strong> - 可近距离观赏大熊猫、金丝猴等珍稀动物，并了解它们的生活习性和保护知识。\n\n5. <strong>雍和宫</strong> - 这座藏传佛教寺庙展示了藏传佛教文化的独特魅力，还能欣赏到精美的艺术品。\n\n6. <strong>中国国家博物馆</strong> - 是一个综合性博物馆，收藏了丰富的历史文物和艺术品，可以深入了解中国古代文明及现代发展变迁。\n\n7. <strong>北京欢乐谷</strong> - 提供各种游乐设施和娱乐活动，适合全家游玩。\n\n 此外，还可以去天安门广场观看升旗仪式，或参加音乐会、摄影等活动。希望这些信息对你有帮助！’, additional_kwargs={}, response_metadata={‘model’: ‘qwen2.5:latest’, ‘created_at’: ‘2024-12-02T00:53:10.563428146Z’, ‘done’: True, ‘done_reason’: ‘stop’, ‘total_duration’: 3652345216, ‘load_duration’: 50194805, ‘prompt_eval_count’: 2039, ‘prompt_eval_duration’: 471562000, ‘eval_count’: 259, ‘eval_duration’: 2786916000, ‘message’: Message (role=‘assistant’, content=‘根据搜索结果，明天去北京旅游的话，可以考虑参观以下景点：\n\n1. <strong>鸟巢与水立方</strong> - 这两个地标是 2008 年奥运会的主体育场和游泳馆。鸟巢以其独特的钢结构设计著称，而水立方则以蓝色外观吸引游客。\n\n2. <strong>798 艺术区</strong> - 是北京的艺术圣地之一，这里的工业建筑风格和多样化的艺术展览值得一游。\n\n3. <strong>南锣鼓巷</strong> - 体验老北京风情和特色四合院。这里还有丰富的商业文化和地道的北京小吃。\n\n4. <strong>北京动物园</strong> - 可近距离观赏大熊猫、金丝猴等珍稀动物，并了解它们的生活习性和保护知识。\n\n5. <strong>雍和宫</strong> - 这座藏传佛教寺庙展示了藏传佛教文化的独特魅力，还能欣赏到精美的艺术品。\n\n6. <strong>中国国家博物馆</strong> - 是一个综合性博物馆，收藏了丰富的历史文物和艺术品，可以深入了解中国古代文明及现代发展变迁。\n\n7. <strong>北京欢乐谷</strong> - 提供各种游乐设施和娱乐活动，适合全家游玩。\n\n 此外，还可以去天安门广场观看升旗仪式，或参加音乐会、摄影等活动。希望这些信息对你有帮助！’, images=None, tool_calls=None)}, id=‘run-095bf4a5-63f4-4384-a019-077d46e240ad-0’, usage_metadata={‘input_tokens’: 2039, ‘output_tokens’: 259, ‘total_tokens’: 2298})]}}</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> chunk <span class="keyword">in</span> agent_executor.stream(</span><br><span class="line">    {<span class="string">"messages"</span>: [HumanMessage(content=<span class="string">"我准备去上海旅游3天，帮我指定一个行程单，首先查询当地的天气，如果下雨，请安排室内项目，如果晴朗，优先安排室外项目"</span>)]}, config</span><br><span class="line">):</span><br><span class="line">    <span class="built_in">print</span>(chunk)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"----"</span>)</span><br></pre></td></tr></tbody></table></figure><blockquote><pre><code>{'agent': {'messages': [AIMessage(content='', additional_kwargs={}, response_metadata={'model': 'qwen2.5:latest', 'created_at': '2024-12-02T00:53:25.615388721Z', 'done': True, 'done_reason': 'stop', 'total_duration': 863429075, 'load_duration': 108520424, 'prompt_eval_count': 539, 'prompt_eval_duration': 152138000, 'eval_count': 41, 'eval_duration': 401491000, 'message': Message(role='assistant', content='', images=None, tool_calls=[ToolCall(function=Function(name='get_weather', arguments={'city_name': '上海'}))])}, id='run-b468291d-c48d-4181-8b68-b710c281ead3-0', tool_calls=[{'name': 'get_weather', 'args': {'city_name': '上海'}, 'id': '1700eab4-b74c-412a-8307-dc95d2fd6807', 'type': 'tool_call'}], usage_metadata={'input_tokens': 539, 'output_tokens': 41, 'total_tokens': 580})]}}
{'tools': {'messages': [ToolMessage(content='{"status": "1", "count": "1", "info": "OK", "infocode": "10000", "forecasts": [{"city": "上海市", "adcode": "310000", "province": "上海", "reporttime": "2024-12-02 08:33:17", "casts": [{"date": "2024-12-02", "week": "1", "dayweather": "晴", "nightweather": "晴", "daytemp": "20", "nighttemp": "10", "daywind": "北", "nightwind": "北", "daypower": "1-3", "nightpower": "1-3", "daytemp_float": "20.0", "nighttemp_float": "10.0"}, {"date": "2024-12-03", "week": "2", "dayweather": "阴", "nightweather": "阴", "daytemp": "16", "nighttemp": "10", "daywind": "北", "nightwind": "北", "daypower": "1-3", "nightpower": "1-3", "daytemp_float": "16.0", "nighttemp_float": "10.0"}, {"date": "2024-12-04", "week": "3", "dayweather": "阴", "nightweather": "阴", "daytemp": "13", "nighttemp": "9", "daywind": "北", "nightwind": "北", "daypower": "1-3", "nightpower": "1-3", "daytemp_float": "13.0", "nighttemp_float": "9.0"}, {"date": "2024-12-05", "week": "4", "dayweather": "小雨", "nightweather": "小雨", "daytemp": "12", "nighttemp": "7", "daywind": "北", "nightwind": "北", "daypower": "1-3", "nightpower": "1-3", "daytemp_float": "12.0", "nighttemp_float": "7.0"}]}]}', name='get_weather', id='0ecb369a-d3c7-4598-9409-9da30da13caf', tool_call_id='1700eab4-b74c-412a-8307-dc95d2fd6807')]}}
</code></pre><p>{‘agent’: {‘messages’: [AIMessage (content=‘根据天气预报，您在上海的前三天会有以下天气情况：\n\n- 12 月 2 日：晴朗，适合外出活动。\n- 12 月 3 日：阴天，气温较低，建议选择室内项目或稍微减少户外活动的时间。\n- 12 月 4 日：继续为阴天，气温略有下降，请注意保暖。\n\n 以下是为您规划的三天行程单：\n\n### 第一天（2024 年 12 月 2 日）\n- 上午：外滩 - 观赏东方明珠和黄浦江美景 \n- 中午：品尝地道上海小吃，如生煎、小笼包等 \n- 下午：参观豫园 - 体验老上海的古典园林艺术 \n- 晚上：人民广场 - 看看世纪大钟，并逛一逛周边的商场 \n\n### 第二天（2024 年 12 月 3 日）\n- 上午：南京路步行街 - 购物、品尝特色美食 \n- 中午：参观上海博物馆 - 了解中国历史文物与艺术品 \n- 下午：田子坊 - 漫步艺术街区，欣赏现代设计作品 \n- 晚上：观看上海大剧院的演出或音乐剧 \n\n### 第三天（2024 年 12 月 4 日）\n- 上午：上海科技馆 - 探索科学与技术的魅力 \n- 中午：品尝上海特色午餐 \n- 下午：参观上海自然博物馆 - 品味生物多样性之美 \n- 晚上：回到市区逛逛，享受城市的夜生活 \n\n### 注意事项：\n1. 由于天气预报显示 12 月 5 日有小雨，请在最后一天适当调整行程，可选择室内活动或减少外出时间。\n2. 根据温度变化，请适时增添衣物。\n\n 希望这个行程单对您有所帮助！祝您在上海有一个愉快的旅程！’, additional_kwargs={}, response_metadata={‘model’: ‘qwen2.5:latest’, ‘created_at’: ‘2024-12-02T00:53:30.758938479Z’, ‘done’: True, ‘done_reason’: ‘stop’, ‘total_duration’: 4786725635, ‘load_duration’: 88752337, ‘prompt_eval_count’: 1081, ‘prompt_eval_duration’: 169040000, ‘eval_count’: 395, ‘eval_duration’: 4118673000, ‘message’: Message (role=‘assistant’, content=‘根据天气预报，您在上海的前三天会有以下天气情况：\n\n- 12 月 2 日：晴朗，适合外出活动。\n- 12 月 3 日：阴天，气温较低，建议选择室内项目或稍微减少户外活动的时间。\n- 12 月 4 日：继续为阴天，气温略有下降，请注意保暖。\n\n 以下是为您规划的三天行程单：\n\n### 第一天（2024 年 12 月 2 日）\n- 上午：外滩 - 观赏东方明珠和黄浦江美景 \n- 中午：品尝地道上海小吃，如生煎、小笼包等 \n- 下午：参观豫园 - 体验老上海的古典园林艺术 \n- 晚上：人民广场 - 看看世纪大钟，并逛一逛周边的商场 \n\n### 第二天（2024 年 12 月 3 日）\n- 上午：南京路步行街 - 购物、品尝特色美食 \n- 中午：参观上海博物馆 - 了解中国历史文物与艺术品 \n- 下午：田子坊 - 漫步艺术街区，欣赏现代设计作品 \n- 晚上：观看上海大剧院的演出或音乐剧 \n\n### 第三天（2024 年 12 月 4 日）\n- 上午：上海科技馆 - 探索科学与技术的魅力 \n- 中午：品尝上海特色午餐 \n- 下午：参观上海自然博物馆 - 品味生物多样性之美 \n- 晚上：回到市区逛逛，享受城市的夜生活 \n\n### 注意事项：\n1. 由于天气预报显示 12 月 5 日有小雨，请在最后一天适当调整行程，可选择室内活动或减少外出时间。\n2. 根据温度变化，请适时增添衣物。\n\n 希望这个行程单对您有所帮助！祝您在上海有一个愉快的旅程！’, images=None, tool_calls=None)}, id=‘run-0ba0fd6f-e6bc-4b77-92e8-bf6fb9f7a3bd-0’, usage_metadata={‘input_tokens’: 1081, ‘output_tokens’: 395, ‘total_tokens’: 1476})]}}</p></blockquote></div><footer class="post-footer"><div class="reward-container"><div>请我一杯咖啡吧！</div><button>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.png" alt="Shaogui 微信"> <span>微信</span></div><div><img src="/images/alipay.png" alt="Shaogui 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Shaogui</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://www.shaogui.life/posts/1274944470.html" title="langchain 进阶 03-Agent">https://www.shaogui.life/posts/1274944470.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><span>欢迎关注我的其它发布渠道</span><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="https://www.zhihu.com/people/mu-zhi-zhi-tian"><span class="icon"><i class="fab fa-zhihu"></i> </span><span class="label">知乎</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i> </span><span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/2325693243.html" rel="prev" title="langchain 进阶 02-FuntionCalling"><i class="fa fa-angle-left"></i> langchain 进阶 02-FuntionCalling</a></div><div class="post-nav-item"><a href="/posts/359554637.html" rel="next" title="RAG 的 Indexing 优化之 ChunkOptimization">RAG 的 Indexing 优化之 ChunkOptimization <i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments utterances-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Shaogui</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>站点总字数：</span> <span title="站点总字数">1.9m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">28:48</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="reading-progress-bar"></div><a href="https://github.com/WuShaogui" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/pace.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"WuShaogui/wushaogui.github.io","issue_term":"pathname","theme":"github-light"}</script><script src="/js/third-party/comments/utterances.js"></script></body></html>